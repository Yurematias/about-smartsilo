<!doctype html>
<html lang="pt-BR">

<head>
  <title>SmartSilo Project - About</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="../../css/custom.css">
  <link rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/github.min.css">
  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=sons-of-obsidian"></script>
</head>

<body>
  <div id="app">
    <nav class="navbar navbar-expand-sm navbar-dark dark text-light">
      <a class="navbar-brand" href="./sobre">
        <img src="../../img/smart.png" class="logo">
      </a>
      <button class="navbar-toggler" data-target="#my-nav" data-toggle="collapse" aria-controls="my-nav"
        aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="my-nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="./sobre.html">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./instalacao.html" tabindex="-1" aria-disabled="true">Installation</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./metodologia.html" tabindex="-1" aria-disabled="true">Methodology</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="./tutoriais.html" tabindex="-1" aria-disabled="true">Related tutorials</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../dashboard.html" tabindex="-1" aria-disabled="true">Portuguese version</a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="container-fluid mt-20">
      <div class="row">
        <div class="col-md-10 col-12 main">
          <div class="container-fluid padding-dash">
            <section id="introdução">
              <h3 class="font-weight-bold">
                Signal monitoring with JavaScript and Arduino
              </h3>
                <hr>
                <div class="row">
                  <div class="col-md-5 text-justify">
                    <p>
                      In this tutorial, you will see how to build a web page for monitor the signals of potentiometers in the Arduino board,
                      using only JavaScript as programming language
                    </p>
                    <p>
                      For that, NodeJS will be used to run JavaScript outside the browser, the Johnny-five framework that allows serial communication between Node and the Arduino board, and Socket.io, a library that will be used to send data in real time of the Arduino the frontend where a dynamic graph will be plotted
                    </p>
                  </div>
                  <figure class="col-md-6 offset-md-1">
                    <img src="../../img/diagram.png" class="img-responsive photo">
                  </figure>
                </div>
            </section>
            <section id="Tecnologias">
              <h4 class="font-weight-bold">Technologies used</h4>
              <hr>
              <h4>NodeJS</h4>
              <article class="row">
                <p class="col-md-5 text-justify">
                  NodeJS is basically an execution environment
                  Server-side JavaScript, allowing for
                  interpretation of language outside the environment of
                  browsers. Its creation opened the possibility
                  to develop several different systems in
                  JavaScript ranging from desktop programs, servers
                  complex web sites, even hardware-based systems such as
                  case of the application to be developed in this tutorial.
                  <a href="https://nodejs.org/en/">NodeJS official site</a>
                </p>
                <figure class="col-md-6 offset-md-1">
                  <img src="../../img/nodejs.jpg" class="small-photo img-responsive">
                </figure>
              </article>
              <h4>Johnny-Five</h4>
              <article class="row">
                <p class="col-md-5 text-justify">
                  Johnny-five is a framework that makes it possible to interact and control hardware using the JavaScript language in NodeJS. With its launch in 2012, the library and the collection of resources are maintained today by a wide community of developers passionate about robotics, hardware and software.
                  <a href="http://johnny-five.io/">Johnny-Five official site</a>
                </p>
                <figure class="col-md-6 offset-md-1">
                  <img src="../../img/johnny-five.png" class="small-photo img-responsive">
                </figure>
              </article>
              <h4>Socket.io</h4>
              <article class="row">
                <p class="col-md-5 text-justify">
                  Socket.io is a JavaScript library for web applications to perform bidirectional, real-time and event-based communication between clients and web servers. It consists of two parts, a library on the front-end side, the one that runs on browsers, and the back-end library that runs on the server side in NodeJS. The library has several features such as disconnection detection and support for automatic reconnection.
                  <a href="https://socket.io/">Socket.io official site</a>
                </p>
                <figure class="col-md-6 offset-md-1">
                  <img src="../../img/socket.png" class="small-photo img-responsive">
                </figure>
              </article>
            </section>
            <section id="Material">
              <h4 class="font-weight-bold">Necessary Material: </h4>
              <hr>
              <p>To follow this tutorial you will need some components are they:</p>
              <ul class="">
                <li>
                  <a
                    href="https://www.buscape.com.br/informatica/suprimentos/suprimentos-para-informatica/arduino-uno-b.html">
                    Arduino board
                  </a>
                </li>
                <li>
                  <a href="https://www.buscape.com.br/search/potenciometro?fromSearchBox=true&produto=potenciometro">
                    Potentiometer
                  </a>
                </li>
                <li>
                  <a href="#">
                    Jumpers
                  </a>
                </li>
                <li class="">
                  <a href="">Breadboard</a>
                </li>
              </ul>
            </section>
            <section id="Ambiente">
              <h4 class="font-weight-bold">Preparing the environment: </h4>
              <hr>
              <ul class="">
                <li>
                  Install the Arduino IDE
                </li>
                <li>
                  Install Node.js
                </li>
                <li class="text-justify">
                  Install the Visual Studio Express 2010 32 bit <br />
                  (make sure you have all C ++ dependencies selected)
                </li>
                <li>Install Python 2.7.3</li>
                <li>Open the terminal and run:
                  <div class="command">
                    set PATH=%PATH%;C:\Python27
                  </div>
                </li>
                <li>Install the node-gyp with:
                  <div class="command">
                    npm install -g node-gyp
                  </div>
                </li>
              </ul>
            </section>
            <section class="" id="NodeJS">
              <h4 class="font-weight-bold">Installing NodeJS packages</h4>
              <hr>
              <ul>
                <li class="text-justify">
                  After the instalation of Johnny-five we need to install the johnny-five in the root folder of the project
                  <div class="command">npm install --save johnny-five</div>
                </li>
                <li class="text-justify">
                  Also we need to install express to create our web server
                  then run in the terminal:
                  <div class="command">npm install --save express</div>
                </li>
                <li>
                  For the socket.io instalation run:
                  <div class="command">npm install --save socket.io</div>
                </li>
              </ul>
            </section>
            <section id="Arduino">
              <h4 class="font-weight-bold">Preparing the Arduino</h4>
              <hr>
              <p class="text-justify">
                Before start writing our code, we need to prepare the arduino board and 
                the circuit to be able to receive the potentiometer signals,
                for this follow the steps of the diagram 
                placing the output of potentiometers in the analog inputs of A0 and A1
              </p>
              <figure class="">
                <img src="../../img/fritzing.JPG" class="large-photo img-responsive">
              </figure>
            </section>
            <section class="text-justify" id="Servidor">
              <h4 class="font-weight-bold">Creating the server</h4>
              <hr>
              <h4>Creating back-end JavaScript</h4>
              <p class="text-justify">Após toda essa configuração, finalmente
                podemos criar o primeiro arquivo, que será o back-end da
                aplicação. assim crie o arquivo server.js e importe as devidas
                bibliotecas e frameworks anteriormente instaladas na pasta do NodeJS
              </p>
              <pre class="prettyprint">
                <code>
const express = require('express'); // importando o Express 
const app = express(); 
const http = require('http').createServer(app); // criando servidor Expres com o http
const io = require('socket.io')(http); // importando o Socket.io
const five = require('johnny-five'); // importando o Johny-five 
                </code>
              </pre>
              <p class="text-justify">
                Logo após isso definimos uma constante referente a porta que o servidor será
                vinculado e definimos a pasta que será enviada nas requisições para o cliente
                neste caso criaremos uma pasta denominada client, onde estará
                JavaScript client-side, o CSS e o HTML
              </p>
              <!--?prettify lang=javascript-->
              <pre class="prettyprint">
                <code>
const port = 8000;
app.use(express.static(__dirname + '/client'));
                </code>
              </pre>             
            </section>
            <section id="Interface">
              <h4 class="font-weight-bold">Criando a interface da aplicação</h4>
              <hr>
              <h4 class="">Criando HTML</h4>
              <p class="text-justify">
                Após a criação da pasta client, precisamos criar um arquivo html, assim
                crie um arquivo chamado index.html e insira:
              </p>
              <xmp class="prettyprint">
<div class="container big centralize-content" id="container1">
  <h1>Monitor de voltagem</h1>
  <div id="chart"></div>
  <div class="centralize-content bottom-container">
      <div class="form-setPoint">
          <label for="setPoint">Set point: </label>
          <input type="number" name="setPoint" id="setPoint" min="0" max="5">
          <button onclick="changeSetPoint()">OK</button>
      </div>
      <div id="volts1" class="value">carregando...</div>
      <div id="volts2" class="value"></div>
  </div>
</div>
<div class="centralize-content" id="center-div">
  <div>
      <label for="controlBit">Exibir bit de controle: </label>
      <input type="checkbox" id="controlBit" onclick="switchControlBitGraph()">
  </div>
  <button id="pause-resume" onclick="pauseResume()">Pausar</button>
  <button onclick="changePins()">Mudar canais</button>
</div>
<div class="container big centralize-content" id="container2">
  <h1 id="label-control-bit">
      Bit de controle
  </h1>
  <div id="chart2"></div>
  <div class="bottom-container"></div>
</div>
<!-- biblioteca para construção de gráficos-->
<script src="libs/plotly.min.js"></script>               
<!-- socket.io no lado cliente -->
<script src="/socket.io/socket.io.js"></script>     
<!-- CDN do jQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
<!-- script do projeto -->
<script src="script.js"></script>
              </xmp>             
              <p class="">
                <a href="https://github.com/Yurematias/SmartSilo/blob/master/client/style.css">Obter CSS da
                  aplicação</a>
                &nbsp;-&nbsp;
                <a href="https://github.com/Yurematias/SmartSilo/blob/master/client/index.html">Obter HTML
                  completo</a>
              </p>
              <div class="text-justify">
                Pra estilizar baixe o arquivo CSS da aplicação no link acima e faça a link no seu arquivo index.html
              </div>
              <br />
              <div class="text-justify">
                Repare que foi usado bibliotecas externas, a PlotlyJS para construir os gráficos
                e a jQuery que será usada no script customizado e na PlotlyJS. <br />
                Você pode baixar ou obter o CDN do jQuery no site oficial:
              </div>
              <a href="https://jquery.com/" class="">https://jquery.com/</a>
              <br>
              <div class="">
                A PlotlyJS podemos baixá-la ou obter o CDN em:
              </div>
              <a href="https://plot.ly/javascript/" class="">https://plot.ly/javascript/</a>
              <br>
              <p class="text-justify">
                Para referenciar o Socket.io basta adcionar um script com o endereço:
                "socket.io/socket.io.js"
                Isso já faz com que o Socket.io funcione, uma vez que ele já está
                instalado no módulo da pasta do projeto no NodeJS
              </p>
              <h4 class="">Criando JavaScript do front-end</h4>
              <a class="" href="https://github.com/Yurematias/SmartSilo/blob/master/client/script.js">Obter
                front-end JavaScript completo</a>
              <p class="text-justify">
                Uma vez criado o HTML, podemos criar o script que será vinculado a essa página, onde terá
                toda a
                configuração referente aos gráficos, além da manipulação da DOM
              </p>
              <p class="">
                Primeiramente criaremos as variaveis a serem utilizadas
              </p>
              <pre class="prettyprint">
                <code>
const socket = io();                         // constante que armazenará o objeto do socket.io
const startTime = new Date();                // armazenar o tempo inicial ao executar em milisegundos
let value1, value2, controlBitValue = null;  // valores de y inseridos nos gráficos
let setPoint = null;           
let showBitGraph = false;                    // determina se o gráfico do setpoint será mostrado
let pause = false;                           // determina se o gráfico está pasuado
let x = 0;                                   // x representa os pontos no eixo x do gráfico 
let cntSec = 0;                              // conta os segundos passados, a cada minuto ele ganha 60
let minutes = 0;                             // minutes representa os minutos passados
let secP;                                    // armazenar o tempo passado (secP = seconds passed)
let scaleMin = 0, scaleMax = 5;              // escalas do primeiro gráfico
let option = 'voltagem'                      // gráfico a ser exibido         
                </code>
              </pre>   
              <p class="text-justify">
                Antes de plotar os gráficos com a PlotlyJS é preciso definir suas configurações
                assim é preciso criar um objeto para o layout do gráfico e arrays com as linhas de cada
                gráfico
              </p>
              <pre class="prettyprint">
                <code>
let layout = {
  height: 250,
  autosize: true,
  margin: { b: 50, t: 30}
};
                </code>
              </pre>   
              <p class="text-justify">
                Cada linha de um gráfico na PlotlyJS é um objeto, como varias linhas serão
                criadas
                é mais adequado criar uma função para instanciar objetos do tipo Trace (linha),
                sendo assim escreva a seguinte função:
              </p>
              <pre class="prettyprint">
                <code>
// função construtora para gerar objetos do tipo linha 
function Trace(name = 'unnamed trace', valueTrace, color = '#000') {
  this.name = name;
  this.y = [valueTrace];
  this.type = 'line';
  this.mode = 'lines',
  this.line = { color };
}
                </code>
              </pre> 
              <p class="text-justify">
                Depois de criada a função construtora que servirá como um molde para a instanciação dos
                objetos,
                podemos de instanciar as linhas, colocando-as dentro de arrays
              </p>
              <pre class="prettyprint">
                <code>
let traces = [new Trace('potenciômetro 1', value1, '#D00'),
  new Trace('potenciômetro 2', value1, 'orange'),
  new Trace('set point', setPoint, '#00A')
];

let traceCB = [new Trace('bit de controle', controlBitValue)];
                </code>
              </pre> 
              <p class="text-justify">
                Definiremos uma função que retornará o tempo passado em segundos, este valor será utilizado
                para
                saber o tempo passado desde o início da execução de um gráfico
              </p>
              <pre class="prettyprint">
                <p class="text-justify">
// retorna o tempo passado em segundos 
function secondsPassed() {
  let endTime = new Date();
  let timeDiff = endTime - startTime; // retorno em milisegundos
  timeDiff /= 1000; // convertendo para segundos 
  return Math.round(timeDiff);
}
                </p>
              </pre>
              <p class="text-justify">
                Agora criaremos uma função para atualizar o primeiro gráfico que será o de voltagem
                Mais a frente passareos essa função como callback para um setInterval
              </p>
              <pre class="prettyprint">
                <p class="text-justify">
// update do primeiro gráfico
function updateGraph() {
  Plotly.extendTraces('chart', { y: [[value1], [value2], [setPoint]] }, [0, 1, 2]);
  secP = secondsPassed();
  x++;
  if (secP - cntSec > 59) {
    cntSec += 60;
    minutes++;
  }
  Plotly.relayout('chart', {
    xaxix: {
      showticklabels: false,
      title: `tempo decorrido: ${minutes}:${secP < 60 ? secP : secP - cntSec}`,
      range: [x - 50, x]
    },
    yaxis: {
      title: 'voltagem',
      range: [scaleMin, scaleMax]
    }
  });
  if (value) {
    document.getElementById('volts1').innerHTML = `1° potenciômetro: ${value.toFixed(2)} volts`
  }
  if (value2) {
    document.getElementById('volts2').innerHTML = `2° potenciômetro: ${value.toFixed(2)} volts`
  }
}
                </p>
              </pre>
              <p class="text-justify">
                Faremos outra função para atualizar o gráfico do bit de controle, com a ressalva de que
                não será preciso definir algumas variáveis, uma vez que podemos usar as variáveis
                de iteração da função anterior, pois os dois gráficos serão executados simultaneamente com a
                função
                setInterval
              </p>
              <pre class="prettyprint">
                <code>
// update do gráfico de bit de controle
function updateGraphCB() {
  Plotly.extendTraces('chart2', { y: [[controlBitValue]] }, [0]);
  Plotly.relayout('chart2', {
    xaxis: {
      showticklabels: false,
      title: `tempo percorrido: ${minutes}:${secP < 60 ? secP : secP - cntSec}`,
      range: [x - 50, x],
    },
    yaxis: {
      title: 'bit de controle',
      range: [-0.5, 1.5]
    }
  });
}
                </code>
              </pre>   
              <p class="text-justify">
                Agora definiremos alguns comandos a serem executados assim que a página for carregada.
                Primeiramente plotamos os 2 gráficos, alteramos algumas configurações da DOM e
                colocamos as chamadas para a função socket.on que atribuirá eventos a serem chamados
                se determinadas mensagens do servidor forem recebidas.
              </p>
              <pre class="prettyprint">
                <code>
window.onload = function() {
  PLotly.plot('chart', traces, layout, { responsive: true });     // plotar primeiro gráfico
  Plotly.plot('chart2',traceCB, layout, { responsive: true });    // plotar gráfico do bit de controle
  $('#' + option).addClass('marked');                             // marcar a opção atual do gráfico     
  $('#controlBut').prop('checked', false);                        // deixar o checkbox desmarcado por padrão 
  socket.on('connect', () => {
    socket.emit('connected', `${socket.id} diz "Estou conectado"`);
  });
  socket.on('value1', receivedFromServer => value1 = receivedFromServer); // listener para receber o valor do primeiro potenciômetro
  socket.on('value2', receivedFromServer => value2 = receivedFromServer); // listener para receber o valor do segundo potenciômetro
  socket.on('controlBit', receivedFromServer => controlBitValue = receivedFromServer); // listener para receber valor do bit de controle
}
                </code>
              </pre>   
              <p class="text-justify">
                Depois de plotados os gráficos, podemos passar as funções de atualizar
                como callbacks para a função setInterval e assim fazer os gráficos
                atualizarem em tempo real
              </p>
              <pre class="prettyprint">
                <code>
let executingGraph = setInterval(updateGraph, 100);
let executingGraphCB = setInterval(updateGraphCB, 100);
                </code>
              </pre>  
              <p class="text-justify">
                Definiremos uma função para pausar ou retomar os gráficos, funcionalidade importante par
                caso o usuário deseje visualizar os valores ou mesmo fazer uma captura de tela
              </p>
              <pre class="prettyprint">
                <code>
// função para pausar ou retomar o gráfico
function pauseResume() {
  pause = !pause;
  if (pause) {
    document.getElementById('pause-resume').innerText = 'RETOMAR';
    clearInterval(executingGraph);    // pausa o primeiro gráfico
    clearInterval(executingGraphCB);  // pausa o segundo gŕafico
  } else {
    document.getElementById('pause-resume').innerText = 'PAUSAR';
    executingGraph = setInterval(updateGraph, 100);  // retoma o primeiro gráfico
    executingGraphCB = setInterval(updateGraphCB, 100); // retorma o segundo gráfico 
  }
}
                </code>
              </pre> 
              <p class="text-justify">
                Definimos também uma função para alterar o Set Point, onde o usuário digitará um novo
                Set Point e esse valor passará a ser exibido no gráfico de voltagem, além de ir pro servidor
              </p>
              <pre class="prettyprint">
                <code>
// função para mudar o setPoint
function changeSetPoint() {
  document.getElementById('label-control-bit').innerHTML = 'Bit de controle';
  setPoint = document.getElementById('setPoint').value;
  socket.emit('setPoint', setPoint);  // mandar o set point para o servidor 
}
                </code>
              </pre>  
            </section>
            <section id="Finalizando">
              <h2 class="">Finalizando o servidor</h2>
              <hr>
              <p class="text-justify">
                Depois de criar todo o front-end da aplicação, está na hora de terminarmos
                o servidor e escrevermos todo o código do Arduino e do Socket.io do lado servidor.
                O primeiro passo é declararmos um objeto do tipo porta referente ao Arduino
                além de algumas variáveis importantes como os valores dos potenciômetros e o valor do Set
                Point
                desta forma escreva o seguinte código:
              </p>
              <pre class="prettyprint">
                <code>
// declarando Arduino na porta ao qual está conectado
const arduino = new five.Board({ port: 'COM6' });
let setPoint; // valor do setpoint passado pelo usuário
let v1, v2;       // valores dos potenciômetros
                </code>
              </pre>  
              <p class="text-justify">
                Após isso vamos definir o que será feito quando o Arduino estiver no estado de pronto.
                Primeiramente instanciamos os objetos dos potenciômetros
              </p>
              <pre class="prettyprint">
                <code>
// quando o arduino estiver pronto executar
arduino.on('ready', () => {
  console.log('Placa pronta');
  pot1 = new five.Sensor({ pin: 'A0', freq: 250 }); // primeiro potenciômetro
  pot2 = new five.Sensor({ pin: 'A1', freq: 250 }); // primeiro potenciômetro

  arduino.repl.inject({ pot: pot1 });
  arduino.repl.inject({ pot: pot2 });
});
                </code>
              </pre>  
              <p class="text-justify">
                Depois de instanciar os potenciômetros, vamos criar toda a base do back-end da aplicação.
                Definimos o que será feito quand o usuário conectar na aplicação. definimos que
                quando os potenciômetros estiverem nos estados de prontos, a aplicação precisa enviar esses
                dados em tempo real,
                utilizaremos um intervalo de tempo de 300 milisegundos, ou seja, a cada 300 milisegundos o
                servidor mandará os dados
                do Arduino para o cliente é aí que entra o Socket.io com a função emit na aplicação.
              </p>
              <p class="text-justify">
                Desta forma colocamos as funções referentes ao Socket.io para quando os potenciômetros
                estiverem prontos, os dados serem mandados para o cliente com o socket.emit dentro de um
                setinterval.
              </p>
              <p class="text-justify">
                Note que é preciso realizar uma conversão dos valores dos potenciômetros,
                uma vez que o UNO possui conversor ADC de 10 bits de resolução, assim lê valores entre 0 e
                1023,
                desta forma é preciso realizar a conversão para tensão, multiplicando por 5/1024.
              </p>
              <pre class="prettyprint">
                <code>
// quando o cliente conectar
io.on('connection', socket => {
  // executar quando receber a mensagem de retorno do cliente 
  socket.on('conneted', msg => {
    console.log('\nMandando dados para: ' + msg);
    // se potenciômetros estiverem ok, executar...
    setInterval(() => {
      v1 = pot.value * 5 / 1024; // conversão de 1024 bits para tensão
      v2 = pot.value * 5 / 1024; // conversão de 1024 bits para tensão
      controlBit = (v1 > setPoint && v2 > setPoint) ? 1 : 0;
      socket.emit('values', {v1, v2, controlBit});
    }, 400);
  })
});
                </code>
              </pre>
              <p class="text-justify">
                Abaixo escrevemos um trecho de código para alterar o Set Point quando o usuário o tiver
                alterado
                no cliente.
                Para isso escreva:
              </p>
              <pre class="prettyprint">
                <code>
// quando receber um novo setPoint 
socket.on('changeSetPoint', msg => {
  setPoint = msg;
  console.log('Set point alterado para: ${setPoint} volts');
});
                </code>
              </pre>
              <p class="text-justify">
                Desta forma temos a função completa que será executada quando o Arduino estiver pronto
              </p>
              <pre class="prettyprint">
                <code>
arduino.on('ready', () => {
  console.log('Placa pronta');
  pot1 = new five.Sensor({ pin: 'A0', freq: 250 }); // primeiro potenciômetro
  pot2 = new five.Sensor({ pin: 'A1', freq: 250 }); // primeiro potenciômetro

  arduino.repl.inject({ pot: pot1 });
  arduino.repl.inject({ pot: pot2 });

  // quando o cliente conectar
  io.on('connection', socket => {
    // executar quando receber a mensagem de retorno do cliente 
    socket.on('conneted', msg => {
      console.log('\nMandando dados para: ' + msg);
      // se potenciômetros estiverem ok, executar...
      setInterval(() => {
        v1 = pot.value * 5 / 1024; // conversão de 1024 bits para tensão
        v2 = pot.value * 5 / 1024; // conversão de 1024 bits para tensão
        controlBit = (v1 > setPoint && v2 > setPoint) ? 1 : 0;
        socket.emit('values', {v1, v2, controlBit});
      }, 400);
    });
    // quando receber um novo setPoint
    socket.on('changeSetPoint', msg => {
      setPoint = msg;
      console.log('Set point alterado para: ${setPoint} volts');
    });
  });
});
                </code>
              </pre>
              <p class="text-justify">
                Finalizando o back-end, só é preciso fazer o http ouvir na porta anteriormente declarada,
                para assim podermos acessar a aplicação de maneira local no endereço: http://localhost:8000
              </p>
              <pre class="prettyprint">
                <code>
// ouvir na porta declarada
http.listen(port, () => console.log('Abrir em : http://localhost:' + port));
                </code>
              </pre>
            </section>
            <section class="Resultado">
              <h2 class="">Resultado: </h2>
              <hr>
              <p class="">Acessando o endereço citado podermos finalmente ver a aplicação pronta: </p>
              <figure class="">
                <img src="../../img/code/SmartSilo.PNG" class="img-responsive">
              </figure>
            </section>
            <section class="text-center" id="Referencias">
              <h4 class="font-weight-bold ">Referências</h4> <br>
              <a href="http://johnny-five.io/">Site oficial do Johnny-Five</a> <br>
              <a href="https://socket.io/">Site oficial do Socket.io</a> <br>
              <a href="https://nodejs.org/en/">Site oficial do NodeJS</a> <br>
              <a href="https://www.youtube.com/watch?v=kmT5mVBF2tI">Canal do YouTube: Joao Rubens Marchete
                Filho</a> <br>
              <a href="https://www.youtube.com/watch?v=qZUDuBcbJ9A">Canal do Youtube: Dev Pleno</a> <br>
            </section>
          </div>
        </div>
        <div class="col-1 col-lg-2 d-none d-md-block navigation fixed-right">
          <h5 class="">Navegação</h5>
          <ul>
            <li><a href="#Introdução">Introdução</a></li>
            <li><a href="#Tecnologias">Tecnologias utilizadas</a></li>
            <li><a href="#Material">Material necessário</a></li>
            <li><a href="#Ambiente">Preparando o Ambiente</a></li>
            <li><a href="#Arduino">Preparando o Arduino</a></li>
            <li><a href="#NodeJS">Pacotes do NodeJS</a></li>
            <li><a href="#Servidor">Criando servidor NodeJS</a></li>
            <li><a href="#Interface">Criando interface</a></li>
            <li><a href="#Resultado">Resultado</a></li>
            <li><a href="#Referencias">Referências</a></li>
          </ul>
        </div>
      </div>
    </div>
    <footer class="page-footer font-small teal pt-4 mt-0">
      <div class="container-fluid text-center text-md-center">
        <div class="row">
          <div class="col-md-6 mt-md-0 mt-3">
            <p>Escrito e desenvolvido por Yure Matias</p>
          </div>
          <hr class="clearfix w-100 d-md-none pb-3">
          <div class="col-md-6 mb-md-0 mb-3">
            <p>Universidade Federal do Rio Grande do Norte</p>
          </div>
        </div>
      </div>
      <div class="footer-copyright text-center py-3">© 2019 Copyright:
        <a href="http://github.com/yurematias"> Yure</a>
      </div>
    </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="../js/main.js" type="module"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>

</html>